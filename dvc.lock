schema: '2.0'
stages:
  preprocess:
    cmd: python3 -u preprocessing.py
    deps:
    - path: preprocessing.py
      hash: md5
      md5: cc9b0aab43cf098b451b76b7c28c6a3c
      size: 1408
    params:
      params.yaml:
        cache:
          location: data/.vbn_s3_cache
          force_download: false
        preprocess:
          areas:
          - VISp
          - VISl
          stimulus-block: 5
          bin-size: 0.05
          stimulus-duration: 0.25
    outs:
    - path: data/area-responses/
      hash: md5
      md5: c8ec36b0953547bb73b891c488a851cf.dir
      size: 36457528
      nfiles: 2
  rrr_analysis:
    cmd: python3 -u rrr_analysis.py
    deps:
    - path: data/area-responses/
      hash: md5
      md5: 18a4a286fc913c2b7dca2a17b792fbe4.dir
      size: 27702328
      nfiles: 2
    params:
      params.yaml:
        cache:
          location: data/.vbn_s3_cache
          force_download: false
        rrr:
          cv: 5
          rank: 10
    outs:
    - path: results/rrr_coefficients.pickle
      hash: md5
      md5: 602969e22ae61fd2082ce408273d3275
      size: 360803
  plots:
    cmd: python3 -u rrr-rank-plot.py
    deps:
    - path: results/VISp_VISl_cross-time-test-scores.pickle
      hash: md5
      md5: 1d989205b11f97b816e90443e59173f0
      size: 4152
    - path: rrr-rank-plot.py
      hash: md5
      md5: 42152dd88885c64bbd2500e28d6f8afe
      size: 1119
    params:
      params.yaml:
        preprocess:
          areas:
          - VISp
          - VISl
          stimulus-block: 5
          bin-size: 0.05
          stimulus-duration: 0.25
        rrr:
          cv: 3
          rank: 100
        rrr-plot:
          discard-first-500-ms: true
    outs:
    - path: figures/V1-V2_cross-time_RRR-rank-analysis-2DIM.png
      hash: md5
      md5: cfb3fbab9d90b336c8fc98306dc7dffe
      size: 23483
    - path: figures/V1-V2_cross-time_RRR-rank-analysis-averaged-over-time.png
      hash: md5
      md5: d228206edc82c78d94b6eace124b1386
      size: 29802
    - path: figures/V1-V2_cross-time_RRR-rank-analysis-timewise.png
      hash: md5
      md5: e6b9f1c3f2ef299d33e0c1b6c239ceec
      size: 55912
  time_lag_analysis:
    cmd: python3 -u time_lag_analysis.py
    deps:
    - path: data/area-responses/
      hash: md5
      md5: c0d25e573c80757dee5540640262535b.dir
      size: 577559292
      nfiles: 3
    params:
      params.yaml:
        preprocess:
          areas:
          - VISp
          - VISl
          stimulus-block: 5
          bin-size: 0.005
          stimulus-duration: 0.25
        rrr:
          cv: 5
          rank: 10
    outs:
    - path: results/VISp_VISl_cross-time-coeffs.pickle
      hash: md5
      md5: 3ab7d9da547a0cfffcdb0b7bf2eec32f
      size: 20152
  analysis:
    cmd: python3 -u rrr-rank-analysis.py
    deps:
    - path: data/area-responses/
      hash: md5
      md5: c8ec36b0953547bb73b891c488a851cf.dir
      size: 36457528
      nfiles: 2
    - path: rrr-rank-analysis.py
      hash: md5
      md5: 63858e485c6e628ec3d949517d0d0595
      size: 1349
    params:
      params.yaml:
        preprocess:
          areas:
          - VISp
          - VISl
          stimulus-block: 5
          bin-size: 0.05
          stimulus-duration: 0.25
        rrr:
          cv: 3
          rank: 100
    outs:
    - path: results/VISp_VISl_cross-time-test-scores.pickle
      hash: md5
      md5: 1d989205b11f97b816e90443e59173f0
      size: 4152
  behav-preprocess:
    cmd: python3 -u behav-preprocessing.py
    deps:
    - path: behav-preprocessing.py
      hash: md5
      md5: 7451924b8d7170dc7280fb4455e536c4
      size: 1524
    params:
      params.yaml:
        preprocess:
          areas:
          - VISp
          - VISl
          stimulus-block: 5
          bin-size: 0.05
          stimulus-duration: 0.25
    outs:
    - path: data/behav-responses/
      hash: md5
      md5: ccb923276b34dab60d053b10bf2afe91.dir
      size: 576126
      nfiles: 3
