schema: '2.0'
stages:
  load:
    cmd: python3 -u load_raw_activity_data.py
    deps:
    - path: load_raw_activity_data.py
      md5: 8422ee0dd72b27242666f38599e02bfc
      size: 860
    params:
      params.yaml:
        load:
          session: 1055221968
          areas:
          - VISp
          - VISl
          stimulus-block: 5
          step-size: 0.001
          stimulus-duration: 0.25
    outs:
    - path: data/raw-area-responses/
      md5: d161bf41e5086ee3120ffac6e8e5501b.dir
      size: 2235868322
      nfiles: 2
  analysis:
    cmd: python3 -u crosstime-analysis.py
    deps:
    - path: crosstime-analysis.py
      md5: 8430c874ccf15087e15ddd07d126d575
      size: 2486
    - path: data/raw-area-responses/
      md5: 1acae40cca9a42a5d7cea16f4821b0de.dir
      size: 1095312322
      nfiles: 2
    params:
      params.yaml:
        best-rrr-params:
          1111013640:
            top-down:
              cv: 2
              rank: 16
            bottom-up:
              cv: 2
              rank: 16
          1108334384:
            top-down:
              cv: 2
              rank: 14
            bottom-up:
              cv: 3
              rank: 18
          1112515874:
            top-down:
              cv: 3
              rank: 12
            bottom-up:
              cv: 2
              rank: 12
          1112302803:
            top-down:
              cv: 3
              rank: 14
            bottom-up:
              cv: 2
              rank: 14
          1113751921:
            top-down:
              cv: 4
              rank: 20
            bottom-up:
              cv: 2
              rank: 10
          1048189115:
            top-down:
              cv: 5
              rank: 16
            bottom-up:
              cv: 3
              rank: 16
          1047969464:
            top-down:
              cv: 5
              rank: 16
            bottom-up:
              cv: 3
              rank: 18
          1049514117:
            top-down:
              cv: 2
              rank: 8
            bottom-up:
              cv: 5
              rank: 10
          1052533639:
            top-down:
              cv: 4
              rank: 20
            bottom-up:
              cv: 4
              rank: 16
          1053718935:
            top-down:
              cv: 4
              rank: 18
            bottom-up:
              cv: 4
              rank: 18
          1053941483:
            top-down:
              cv: 2
              rank: 16
            bottom-up:
              cv: 4
              rank: 12
          1055415082:
            top-down:
              cv: 2
              rank: 12
            bottom-up:
              cv: 4
              rank: 20
          1062755779:
            top-down:
              cv: 5
              rank: 12
            bottom-up:
              cv: 3
              rank: 10
          1063010385:
            top-down:
              cv: 2
              rank: 10
            bottom-up:
              cv: 4
              rank: 14
          1064639378:
            top-down:
              cv: 4
              rank: 20
            bottom-up:
              cv: 2
              rank: 16
          1065905010:
            top-down:
              cv: 4
              rank: 20
            bottom-up:
              cv: 4
              rank: 16
          1065908084:
            top-down:
              cv: 2
              rank: 10
            bottom-up:
              cv: 4
              rank: 12
          1067588044:
            top-down:
              cv: 2
              rank: 12
            bottom-up:
              cv: 5
              rank: 18
          1067781390:
            top-down:
              cv: 2
              rank: 12
            bottom-up:
              cv: 5
              rank: 20
          1069461581:
            top-down:
              cv: 2
              rank: 16
            bottom-up:
              cv: 3
              rank: 20
          1071300149:
            top-down:
              cv: 2
              rank: 14
            bottom-up:
              cv: 2
              rank: 8
          1081079981:
            top-down:
              cv: 4
              rank: 12
            bottom-up:
              cv: 4
              rank: 12
          1081429294:
            top-down:
              cv: 4
              rank: 14
            bottom-up:
              cv: 3
              rank: 18
          1086200042:
            top-down:
              cv: 4
              rank: 10
            bottom-up:
              cv: 2
              rank: 10
          1086410738:
            top-down:
              cv: 5
              rank: 14
            bottom-up:
              cv: 3
              rank: 10
          1087720624:
            top-down:
              cv: 3
              rank: 12
            bottom-up:
              cv: 3
              rank: 14
          1087992708:
            top-down:
              cv: 2
              rank: 10
            bottom-up:
              cv: 2
              rank: 12
          1090803859:
            top-down:
              cv: 2
              rank: 12
            bottom-up:
              cv: 2
              rank: 12
          1091039376:
            top-down:
              cv: 2
              rank: 12
            bottom-up:
              cv: 2
              rank: 6
          1091039902:
            top-down:
              cv: 2
              rank: 12
            bottom-up:
              cv: 2
              rank: 20
          1093864136:
            top-down:
              cv: 2
              rank: 4
            bottom-up:
              cv: 2
              rank: 10
          1095340643:
            top-down:
              cv: 3
              rank: 14
            bottom-up:
              cv: 4
              rank: 25
          1098119201:
            top-down:
              cv: 2
              rank: 12
            bottom-up:
              cv: 2
              rank: 8
        load:
          session: 1053941483
          areas:
          - VISp
          - VISl
          stimulus-block: 5
          step-size: 0.001
          stimulus-duration: 0.25
        preprocess:
          areas:
          - VISp
          - VISl
          lag-time: 0
          lag-area: VISl
          step-size: 0.01
          bin-size: 0.1
          stimulus-duration: 0.25
        rrr:
          cv: 3
          rank: 18
          error-score: raise
          predictor: VISp
          target: VISp
          timepoint: 0.05
        rrr-param-search:
          cv:
          - 3
          rank:
          - 14
          lag:
          - 100
          - 105
          - 110
          - 115
          - 120
          - 125
          - 130
          - 135
          - 140
          - 145
          - 150
          timepoints:
          - 0
          duration: 0.25
          time-bin: 0.05
          time-step: 0.025
    outs:
    - path: results/cross-time-RRR.pickle
      md5: 3d165e4a80d814f49654be2e14b05b9a
      size: 12958
  plot:
    cmd: python3 -u crosstime-plot.py
    deps:
    - path: crosstime-plot.py
      md5: 9e25529f5c468bc958d498eb3327162c
      size: 1367
    - path: results/cross-time-RRR.pickle
      md5: 653fc8960b4dc3f265a5bfd64f68fa02
      size: 36070
    params:
      params.yaml:
        rrr-param-search:
          cv:
          - 3
          rank:
          - 14
          lag:
          - 100
          - 105
          - 110
          - 115
          - 120
          - 125
          - 130
          - 135
          - 140
          - 145
          - 150
          timepoints:
          - 0
          duration: 0.25
          time-bin: 0.05
          time-step: 0.025
    outs:
    - path: figures/cross-time-RRR.png
      md5: 44d3f340ac75224c5cb4f56b41e4f29b
      size: 70736
  plots:
    cmd: python3 -u crosstime-timeslice-plot.py
    deps:
    - path: crosstime-timeslice-plot.py
      md5: 5bcaefd3fdd9b53a7fc98b6d802bb454
      size: 1665
    - path: results/cross-time-RRR.pickle
      md5: 653fc8960b4dc3f265a5bfd64f68fa02
      size: 36070
    - path: results/rrr-time-slice.pickle
      md5: a0c68103559e9d7ba4524cd6ffa5564c
      size: 1132
    params:
      params.yaml:
        load:
          session: 1098119201
          areas:
          - VISp
          - VISl
          stimulus-block: 5
          step-size: 0.001
          stimulus-duration: 0.25
        preprocess:
          areas:
          - VISp
          - VISl
          lag-time: 0
          lag-area: VISl
          step-size: 0.01
          bin-size: 0.1
          stimulus-duration: 0.25
        rrr-time-slice:
          predictor-time: 0.15
    outs:
    - path: figures/crosstime-timeslice-plot.png
      md5: 3aa1efcee72b4034349c113e75a7e209
      size: 177531
  cache:
    cmd: python3 -u save-slices.py
    deps:
    - path: results/cross-time-RRR.pickle
      md5: 653fc8960b4dc3f265a5bfd64f68fa02
      size: 36070
    - path: save-slices.py
      md5: f96435535e18d9b5f51d93096567a79c
      size: 639
    params:
      params.yaml:
        load:
          session: 1098119201
          areas:
          - VISp
          - VISl
          stimulus-block: 5
          step-size: 0.001
          stimulus-duration: 0.25
        rrr:
          cv: 3
          rank: 18
          error-score: raise
          predictor: VISp
          target: VISl
          timepoint: 0.05
  preprocess:
    cmd: python3 -u preprocessing.py
    deps:
    - path: data/raw-area-responses/
      md5: 658e8e2b98d678858312f18ee9192073.dir
      size: 2293922322
      nfiles: 2
    - path: preprocessing.py
      md5: 3f55ca4c5a9147f2533e099f2eaee84c
      size: 1332
    params:
      params.yaml:
        load:
          session: 1098119201
          areas:
          - VISp
          - VISl
          stimulus-block: 5
          step-size: 0.001
          stimulus-duration: 0.25
        preprocess:
          areas:
          - VISp
          - VISl
          lag-time: 0
          lag-area: VISl
          step-size: 0.01
          bin-size: 0.1
          stimulus-duration: 0.25
    outs:
    - path: data/area-responses/
      md5: db52ef1776edf4888fab2341a53fbdb6.dir
      size: 229392522
      nfiles: 2
  timeslice:
    cmd: python3 -u rrr-time-slice-analysis.py
    deps:
    - path: data/area-responses/
      md5: db52ef1776edf4888fab2341a53fbdb6.dir
      size: 229392522
      nfiles: 2
    - path: rrr-time-slice-analysis.py
      md5: f0ea99e1ca4e4ed376ba91b5fa4eace3
      size: 1618
    params:
      params.yaml:
        best-rrr-params:
          1111013640:
            top-down:
              cv: 2
              rank: 16
            bottom-up:
              cv: 2
              rank: 16
          1108334384:
            top-down:
              cv: 2
              rank: 14
            bottom-up:
              cv: 3
              rank: 18
          1112515874:
            top-down:
              cv: 3
              rank: 12
            bottom-up:
              cv: 2
              rank: 12
          1112302803:
            top-down:
              cv: 3
              rank: 14
            bottom-up:
              cv: 2
              rank: 14
          1113751921:
            top-down:
              cv: 4
              rank: 20
            bottom-up:
              cv: 2
              rank: 10
          1048189115:
            top-down:
              cv: 5
              rank: 16
            bottom-up:
              cv: 3
              rank: 16
          1047969464:
            top-down:
              cv: 5
              rank: 16
            bottom-up:
              cv: 3
              rank: 18
          1049514117:
            top-down:
              cv: 2
              rank: 8
            bottom-up:
              cv: 5
              rank: 10
          1052533639:
            top-down:
              cv: 4
              rank: 20
            bottom-up:
              cv: 4
              rank: 16
          1053718935:
            top-down:
              cv: 4
              rank: 18
            bottom-up:
              cv: 4
              rank: 18
          1053941483:
            top-down:
              cv: 2
              rank: 16
            bottom-up:
              cv: 4
              rank: 12
          1055415082:
            top-down:
              cv: 2
              rank: 12
            bottom-up:
              cv: 4
              rank: 20
          1062755779:
            top-down:
              cv: 5
              rank: 12
            bottom-up:
              cv: 3
              rank: 10
          1063010385:
            top-down:
              cv: 2
              rank: 10
            bottom-up:
              cv: 4
              rank: 14
          1064639378:
            top-down:
              cv: 4
              rank: 20
            bottom-up:
              cv: 2
              rank: 16
          1065905010:
            top-down:
              cv: 4
              rank: 20
            bottom-up:
              cv: 4
              rank: 16
          1065908084:
            top-down:
              cv: 2
              rank: 10
            bottom-up:
              cv: 4
              rank: 12
          1067588044:
            top-down:
              cv: 2
              rank: 12
            bottom-up:
              cv: 5
              rank: 18
          1067781390:
            top-down:
              cv: 2
              rank: 12
            bottom-up:
              cv: 5
              rank: 20
          1069461581:
            top-down:
              cv: 2
              rank: 16
            bottom-up:
              cv: 3
              rank: 20
          1071300149:
            top-down:
              cv: 2
              rank: 14
            bottom-up:
              cv: 2
              rank: 8
          1081079981:
            top-down:
              cv: 4
              rank: 12
            bottom-up:
              cv: 4
              rank: 12
          1081429294:
            top-down:
              cv: 4
              rank: 14
            bottom-up:
              cv: 3
              rank: 18
          1086200042:
            top-down:
              cv: 4
              rank: 10
            bottom-up:
              cv: 2
              rank: 10
          1086410738:
            top-down:
              cv: 5
              rank: 14
            bottom-up:
              cv: 3
              rank: 10
          1087720624:
            top-down:
              cv: 3
              rank: 12
            bottom-up:
              cv: 3
              rank: 14
          1087992708:
            top-down:
              cv: 2
              rank: 10
            bottom-up:
              cv: 2
              rank: 12
          1090803859:
            top-down:
              cv: 2
              rank: 12
            bottom-up:
              cv: 2
              rank: 12
          1091039376:
            top-down:
              cv: 2
              rank: 12
            bottom-up:
              cv: 2
              rank: 6
          1091039902:
            top-down:
              cv: 2
              rank: 12
            bottom-up:
              cv: 2
              rank: 20
          1093864136:
            top-down:
              cv: 2
              rank: 4
            bottom-up:
              cv: 2
              rank: 10
          1095340643:
            top-down:
              cv: 3
              rank: 14
            bottom-up:
              cv: 4
              rank: 25
          1098119201:
            top-down:
              cv: 2
              rank: 12
            bottom-up:
              cv: 2
              rank: 8
        load:
          session: 1098119201
          areas:
          - VISp
          - VISl
          stimulus-block: 5
          step-size: 0.001
          stimulus-duration: 0.25
        rrr-time-slice:
          predictor-time: 0.15
    outs:
    - path: results/rrr-time-slice.pickle
      md5: a0c68103559e9d7ba4524cd6ffa5564c
      size: 1132
