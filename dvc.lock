schema: '2.0'
stages:
  load:
    cmd: python3 -u load_raw_activity_data.py
    deps:
    - path: load_raw_activity_data.py
      md5: 8422ee0dd72b27242666f38599e02bfc
      size: 860
    params:
      params.yaml:
        load:
          session: 1092283837
          areas:
          - VISp
          - VISl
          stimulus-block: 5
          step-size: 0.001
          stimulus-duration: 0.25
    outs:
    - path: data/raw-area-responses/
      md5: aaa905043d1330a1eb5228fb58da1add.dir
      size: 1104690319
      nfiles: 2
  analysis:
    cmd: python3 -u cv-time-lag-analysis.py
    deps:
    - path: cv-time-lag-analysis.py
      md5: 5aaee89679c4fda561b9bcad4051af56
      size: 3825
    - path: data/raw-area-responses/
      md5: 6026edda613bce51453955aa0f1b6251.dir
      size: 2094108322
      nfiles: 2
    params:
      params.yaml:
        load:
          session: 1091039902
          areas:
          - VISp
          - VISl
          stimulus-block: 5
          step-size: 0.001
          stimulus-duration: 0.25
        preprocess:
          areas:
          - VISp
          - VISl
          lag-time: 0
          lag-area: VISl
          step-size: 0.1
          bin-size: 0.1
          stimulus-duration: 0.25
        rrr:
          cv: 3
          rank: 18
          error-score: raise
          predictor: VISl
          target: VISp
          timepoint: 0.05
        rrr-param-search:
          cv:
          - 2
          - 3
          - 4
          - 5
          rank:
          - 2
          - 4
          - 6
          - 8
          - 10
          - 12
          - 14
          - 16
          - 18
          - 20
          - 25
          - 30
          lag:
          - 0
          - 3
          - 6
          timepoints:
          - 0
          - 100
          duration: 0.25
          time-bin: 0.05
          time-step: 0.025
    outs:
    - path: results/CV-lag-time.pickle
      md5: 041648b050913ff10babebf63bbb1301
      size: 2467
  plot:
    cmd: python3 -u crosstime-plot.py
    deps:
    - path: crosstime-plot.py
      md5: d42aac4ffcc35730bd9c44f4b3bb6f12
      size: 1331
    - path: results/cross-time-RRR.pickle
      md5: f48292fb1543b91540283947850c58ab
      size: 36070
    params:
      params.yaml:
        rrr-param-search:
          cv:
          - 3
          rank:
          - 14
          lag:
          - 100
          - 105
          - 110
          - 115
          - 120
          - 125
          - 130
          - 135
          - 140
          - 145
          - 150
          timepoints:
          - 0
          duration: 0.25
          time-bin: 0.05
          time-step: 0.025
    outs:
    - path: figures/cross-time-RRR.png
      md5: 888e66798f2894ae6cbfe8d149477294
      size: 65889
  plots:
    cmd: python3 -u cv-time-lag-plot.py
    deps:
    - path: cv-time-lag-plot.py
      md5: 94c99302fd551b26e4a997234af1fcbb
      size: 1767
    - path: results/CV-lag-time.pickle
      md5: 041648b050913ff10babebf63bbb1301
      size: 2467
    params:
      params.yaml:
        preprocess:
          areas:
          - VISp
          - VISl
          lag-time: 0
          lag-area: VISl
          step-size: 0.1
          bin-size: 0.1
          stimulus-duration: 0.25
        rrr:
          cv: 3
          rank: 18
          error-score: raise
          predictor: VISl
          target: VISp
          timepoint: 0.05
        rrr-param-search:
          cv:
          - 2
          - 3
          - 4
          - 5
          rank:
          - 2
          - 4
          - 6
          - 8
          - 10
          - 12
          - 14
          - 16
          - 18
          - 20
          - 25
          - 30
          lag:
          - 0
          - 3
          - 6
          timepoints:
          - 0
          - 100
          duration: 0.25
          time-bin: 0.05
          time-step: 0.025
    outs:
    - path: figures/rrr-param-search.png
      md5: 55c6c8c82bdf34ab8d8ee046ebb8df54
      size: 95709
