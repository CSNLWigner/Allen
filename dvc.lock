schema: '2.0'
stages:
  preprocess:
    cmd: python3 -u preprocessing.py
    deps:
    - path: data/raw-area-responses/
      hash: md5
      md5: 94ecd96945585f2a2e5940ae31ec6264.dir
      size: 364572328
      nfiles: 2
    - path: preprocessing.py
      hash: md5
      md5: 02d5df914352d5887a6b645ced79b8b3
      size: 1536
    params:
      params.yaml:
        cache:
          location: data/.vbn_s3_cache
          force_download: false
        preprocess:
          areas:
          - VISp
          - VISl
          step-size: 0.005
          bin-size: 0.005
          stimulus-duration: 0.25
    outs:
    - path: data/area-responses/
      hash: md5
      md5: ce2c7a07f8904e921134497915d3357e.dir
      size: 364572328
      nfiles: 2
  rrr_analysis:
    cmd: python3 -u rrr_analysis.py
    deps:
    - path: data/area-responses/
      hash: md5
      md5: 18a4a286fc913c2b7dca2a17b792fbe4.dir
      size: 27702328
      nfiles: 2
    params:
      params.yaml:
        cache:
          location: data/.vbn_s3_cache
          force_download: false
        rrr:
          cv: 5
          rank: 10
    outs:
    - path: results/rrr_coefficients.pickle
      hash: md5
      md5: 602969e22ae61fd2082ce408273d3275
      size: 360803
  plots:
    cmd: python3 -u time_lag_plot.py
    deps:
    - path: results/VISp_VISl_cross-time-coeffs.pickle
      hash: md5
      md5: bb7411ee0491cba734bbbe1dcc909b51
      size: 20152
    - path: time_lag_plot.py
      hash: md5
      md5: d8a254deb1383cbb8b2baa30b266da64
      size: 631
    params:
      params.yaml:
        preprocess:
          areas:
          - VISp
          - VISl
          step-size: 0.005
          bin-size: 0.005
          stimulus-duration: 0.25
    outs:
    - path: figures/Time_lag_between_V1_LM.png
      hash: md5
      md5: 19f84ee5e2b10c880ccf47fdfa6eddf5
      size: 33907
  time_lag_analysis:
    cmd: python3 -u time_lag_analysis.py
    deps:
    - path: data/area-responses/
      hash: md5
      md5: c0d25e573c80757dee5540640262535b.dir
      size: 577559292
      nfiles: 3
    params:
      params.yaml:
        preprocess:
          areas:
          - VISp
          - VISl
          stimulus-block: 5
          bin-size: 0.005
          stimulus-duration: 0.25
        rrr:
          cv: 5
          rank: 10
    outs:
    - path: results/VISp_VISl_cross-time-coeffs.pickle
      hash: md5
      md5: 3ab7d9da547a0cfffcdb0b7bf2eec32f
      size: 20152
  analysis:
    cmd: python3 -u time_lag_analysis.py
    deps:
    - path: data/area-responses/
      hash: md5
      md5: ce2c7a07f8904e921134497915d3357e.dir
      size: 364572328
      nfiles: 2
    - path: time_lag_analysis.py
      hash: md5
      md5: 5410e227aacbda84642378ebf6cba888
      size: 1466
    params:
      params.yaml:
        preprocess:
          areas:
          - VISp
          - VISl
          step-size: 0.005
          bin-size: 0.005
          stimulus-duration: 0.25
        rrr:
          cv: 3
          rank: 8
          error-score: raise
    outs:
    - path: results/VISp_VISl_cross-time-coeffs.pickle
      hash: md5
      md5: bb7411ee0491cba734bbbe1dcc909b51
      size: 20152
    - path: results/VISp_VISl_cross-time-lag.pickle
      hash: md5
      md5: abb0e1706c730d9969ec676d258e66d5
      size: 116
  behav-preprocess:
    cmd: python3 -u behav-preprocessing.py
    deps:
    - path: behav-preprocessing.py
      hash: md5
      md5: 7451924b8d7170dc7280fb4455e536c4
      size: 1524
    params:
      params.yaml:
        preprocess:
          areas:
          - VISp
          - VISl
          stimulus-block: 5
          step-size: 0.025
          bin-size: 0.05
          stimulus-duration: 0.25
    outs:
    - path: data/behav-responses/
      hash: md5
      md5: 104453b33f55c1aeb16f66da4bcfefdd.dir
      size: 1151766
      nfiles: 3
  load:
    cmd: python3 -u load_raw_activity_data.py
    deps:
    - path: load_raw_activity_data.py
      hash: md5
      md5: bfd5f758e23e3955739076d2bb18ac49
      size: 840
    params:
      params.yaml:
        load:
          areas:
          - VISp
          - VISl
          stimulus-block: 5
          step-size: 0.005
          stimulus-duration: 0.25
    outs:
    - path: data/raw-area-responses/
      hash: md5
      md5: 94ecd96945585f2a2e5940ae31ec6264.dir
      size: 364572328
      nfiles: 2
