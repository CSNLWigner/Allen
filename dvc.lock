schema: '2.0'
stages:
  load:
    cmd: python3 -u load_raw_activity_data.py
    deps:
    - path: load_raw_activity_data.py
      md5: 8422ee0dd72b27242666f38599e02bfc
      size: 860
    params:
      params.yaml:
        load:
          session: 1112302803
          areas:
          - VISp
          - VISl
          stimulus-block: 5
          step-size: 0.001
          stimulus-duration: 0.25
    outs:
    - path: data/raw-area-responses/
      md5: 0e2b5e246edec15869ca98aeb6a0d790.dir
      size: 2475768322
      nfiles: 2
  analysis:
    cmd: python3 -u crosstime-analysis.py
    deps:
    - path: crosstime-analysis.py
      md5: f1597d35f27888f863465e88e97333b1
      size: 2486
    - path: data/raw-area-responses/
      md5: 0e2b5e246edec15869ca98aeb6a0d790.dir
      size: 2475768322
      nfiles: 2
    params:
      params.yaml:
        best-rrr-params:
          1111013640:
            top-down:
              cv: 2
              rank: 16
            bottom-up:
              cv: 2
              rank: 16
          1108334384:
            top-down:
              cv: 2
              rank: 14
            bottom-up:
              cv: 3
              rank: 18
          1112515874:
            top-down:
              cv: 3
              rank: 12
            bottom-up:
              cv: 2
              rank: 12
          1112302803:
            top-down:
              cv: 3
              rank: 14
            bottom-up:
              cv: 2
              rank: 14
          1113751921:
            top-down:
              cv: 4
              rank: 20
            bottom-up:
              cv: 2
              rank: 10
        load:
          session: 1112302803
          areas:
          - VISp
          - VISl
          stimulus-block: 5
          step-size: 0.001
          stimulus-duration: 0.25
        preprocess:
          areas:
          - VISp
          - VISl
          lag-time: 0
          lag-area: VISl
          step-size: 0.01
          bin-size: 0.1
          stimulus-duration: 0.25
        rrr:
          cv: 3
          rank: 18
          error-score: raise
          predictor: VISp
          target: VISp
          timepoint: 0.05
        rrr-param-search:
          cv:
          - 3
          rank:
          - 14
          lag:
          - 100
          - 105
          - 110
          - 115
          - 120
          - 125
          - 130
          - 135
          - 140
          - 145
          - 150
          timepoints:
          - 0
          duration: 0.25
          time-bin: 0.05
          time-step: 0.025
    outs:
    - path: results/cross-time-RRR.pickle
      md5: bbea24c26917abf96ef6c3c8854f9ed8
      size: 36070
  plot:
    cmd: python3 -u crosstime-plot.py
    deps:
    - path: crosstime-plot.py
      md5: 2e22bbb6f91399cf36631eea61a42253
      size: 1205
    - path: results/cross-time-RRR.pickle
      md5: bbea24c26917abf96ef6c3c8854f9ed8
      size: 36070
    params:
      params.yaml:
        rrr-param-search:
          cv:
          - 3
          rank:
          - 14
          lag:
          - 100
          - 105
          - 110
          - 115
          - 120
          - 125
          - 130
          - 135
          - 140
          - 145
          - 150
          timepoints:
          - 0
          duration: 0.25
          time-bin: 0.05
          time-step: 0.025
    outs:
    - path: figures/cross-time-RRR.png
      md5: 06c189ab0ae562b03373ccd2cd8f8537
      size: 112177
