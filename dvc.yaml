


metrics:
  - metrics.json

params:
  - params.yaml

plots:
  - plot.csv:
      y: accuracy
      x: epoch

stages:
  load:
    cmd: python3 -u load_raw_activity_data.py
    deps:
      - load_raw_activity_data.py
    params:
      - preprocess
    outs:
      - data/raw-area-responses/
  preprocess:
    cmd: python3 -u preprocessing.py
    deps:
      - preprocessing.py
      - data/raw-area-responses/
    params:
      - cache
      - preprocess
    outs:
      - data/area-responses/
  analysis:
    cmd: python3 -u rrr-rank-analysis.py
    deps:
      - rrr-rank-analysis.py
      - data/area-responses/
    params:
      - preprocess
      - rrr
    outs:
      - results/VISp_VISl_cross-time-test-scores.pickle
  plots:
    cmd: python3 -u rrr-rank-plot.py
    deps:
      - rrr-rank-plot.py
      - results/VISp_VISl_cross-time-test-scores.pickle
    params:
      - preprocess
      - rrr
      - rrr-plot
    outs:
      - figures/V1-V2_cross-time_RRR-rank-analysis-2DIM.png
      - figures/V1-V2_cross-time_RRR-rank-analysis-timewise.png
      - figures/V1-V2_cross-time_RRR-rank-analysis-averaged-over-time.png